<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="commands.css" media="screen"type="text/css" />
		<link rel="shortcut icon" type="image/x-icon" href="../../../files/images/1_goskalrie.jpg" />
	</head>
	<body>
<div class="article-body">
		
			<div class="article-intro" id="content">
			
			<h1>Linux scp命令</h1><p><a href="commands.html"><img class="navup" src="images/up.gif" alt="Linux 命令大全"> Linux 常用命令</a></p>
<p>Linux scp命令用于Linux之间复制文件和目录。</p>
<p>scp是 secure copy的缩写, scp是linux系统下基于ssh登陆进行安全的远程文件拷贝命令。</p>
<h3>语法</h3>
<pre class="prettyprint prettyprinted"><span class="pln">scp </span><span class="pun">[-</span><span class="lit">1246BCpqrv</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[-</span><span class="pln">c cipher</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[-</span><span class="pln">F ssh_config</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[-</span><span class="pln">i identity_file</span><span class="pun">]</span><span class="pln">
</span><span class="pun">[-</span><span class="pln">l limit</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[-</span><span class="pln">o ssh_option</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[-</span><span class="pln">P port</span><span class="pun">]</span><span class="pln"> </span><span class="pun">[-</span><span class="pln">S program</span><span class="pun">]</span><span class="pln">
</span><span class="pun">[[</span><span class="pln">user@</span><span class="pun">]</span><span class="pln">host1</span><span class="pun">:]</span><span class="pln">file1 </span><span class="pun">[...]</span><span class="pln"> </span><span class="pun">[[</span><span class="pln">user@</span><span class="pun">]</span><span class="pln">host2</span><span class="pun">:]</span><span class="pln">file2</span></pre>
<p>简易写法:</p>
<pre class="prettyprint prettyprinted"><span class="pln">scp </span><span class="pun">[可选参数]</span><span class="pln"> file_source file_target </span></pre>
<p><b>参数说明：</b></p>
<ul><li>-1：
强制scp命令使用协议ssh1</li>
<li>-2：
强制scp命令使用协议ssh2</li>
<li>-4：
强制scp命令只使用IPv4寻址</li>
<li>-6：
强制scp命令只使用IPv6寻址</li>
<li>-B：
使用批处理模式（传输过程中不询问传输口令或短语）</li>
<li>-C：
允许压缩。（将-C标志传递给ssh，从而打开压缩功能）</li>
<li>-p：保留原文件的修改时间，访问时间和访问权限。</li>
<li>-q：
不显示传输进度条。</li>
<li>-r：
递归复制整个目录。</li>
<li>-v：详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。</li>
<li>-c cipher：
以cipher将数据传输进行加密，这个选项将直接传递给ssh。</li>
<li>-F ssh_config：
指定一个替代的ssh配置文件，此参数直接传递给ssh。</li>
<li>-i identity_file：
从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。</li>
<li>-l limit：
限定用户所能使用的带宽，以Kbit/s为单位。</li>
<li>-o ssh_option：
如果习惯于使用ssh_config(5)中的参数传递方式，</li>
<li>-P port：注意是大写的P, port是指定数据传输用到的端口号</li>
<li>-S program：
指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项。</li></ul>
<h3>实例</h3>
<h4>1、从本地复制到远程 </h4>
<p>命令格式：</p>
<pre class="prettyprint prettyprinted"><span class="pln">scp local_file remote_username@remote_ip</span><span class="pun">:</span><span class="pln">remote_folder 
</span><span class="pun">或者</span><span class="pln"> 
scp local_file remote_username@remote_ip</span><span class="pun">:</span><span class="pln">remote_file 
</span><span class="pun">或者</span><span class="pln"> 
scp local_file remote_ip</span><span class="pun">:</span><span class="pln">remote_folder 
</span><span class="pun">或者</span><span class="pln"> 
scp local_file remote_ip</span><span class="pun">:</span><span class="pln">remote_file </span></pre>
<p>
</p><ul>
<li>
第1,2个指定了用户名，命令执行后需要再输入密码，第1个仅指定了远程的目录，文件名字不变，第2个指定了文件名； 
</li>
<li> 
第3,4个没有指定用户名，命令执行后需要输入用户名和密码，第3个仅指定了远程的目录，文件名字不变，第4个指定了文件名；
</li></ul>
 
<p>应用实例：</p>
<pre class="prettyprint prettyprinted"><span class="pln">scp </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">1.mp3</span><span class="pln"> root@www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln">music 
scp </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">1.mp3</span><span class="pln"> root@www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">001.mp3</span><span class="pln"> 
scp </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">1.mp3</span><span class="pln"> www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln">music 
scp </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">1.mp3</span><span class="pln"> www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">001.mp3</span><span class="pln"> </span></pre>

<p>复制目录命令格式： </p>
<pre class="prettyprint prettyprinted"><span class="pln">scp </span><span class="pun">-</span><span class="pln">r local_folder remote_username@remote_ip</span><span class="pun">:</span><span class="pln">remote_folder 
</span><span class="pun">或者</span><span class="pln"> 
scp </span><span class="pun">-</span><span class="pln">r local_folder remote_ip</span><span class="pun">:</span><span class="pln">remote_folder </span></pre>
<ul>
<li>
第1个指定了用户名，命令执行后需要再输入密码；
</li>
<li> 
第2个没有指定用户名，命令执行后需要输入用户名和密码；
</li></ul>
<p>应用实例：</p>
<pre class="prettyprint prettyprinted"><span class="pln">scp </span><span class="pun">-</span><span class="pln">r </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="pln"> root@www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln"> 
scp </span><span class="pun">-</span><span class="pln">r </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="pln"> www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln"> </span></pre>
<p>
上面命令将本地 music 目录复制到远程 others 目录下。</p> 
<h4>2、从远程复制到本地 </h4>
<p>从远程复制到本地，只要将从本地复制到远程的命令的后2个参数调换顺序即可，如下实例 </p>
<p>应用实例：</p> 
<pre class="prettyprint prettyprinted"><span class="pln">scp root@www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="pun">/</span><span class="pln">music </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span><span class="lit">1.mp3</span><span class="pln"> 
scp </span><span class="pun">-</span><span class="pln">r www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">root</span><span class="pun">/</span><span class="pln">others</span><span class="str">/ /</span><span class="pln">home</span><span class="pun">/</span><span class="pln">space</span><span class="pun">/</span><span class="pln">music</span><span class="pun">/</span></pre>
<h3>说明</h3>
<p>
1.如果远程服务器防火墙有为scp命令设置了指定的端口，我们需要使用 -p 参数来设置命令的端口号，命令格式如下：
</p>
<pre class="prettyprint prettyprinted"><span class="com">#scp命令使用端口号 4588</span><span class="pln">
scp </span><span class="pun">-</span><span class="pln">p </span><span class="lit">4588</span><span class="pln"> remote@www</span><span class="pun">.</span><span class="pln">w3cschool</span><span class="pun">.</span><span class="pln">cc</span><span class="pun">:</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">sin</span><span class="pun">.</span><span class="pln">sh </span><span class="pun">/</span><span class="pln">home</span><span class="pun">/</span><span class="pln">administrator</span></pre>
<p>
2.使用scp命令要确保使用的用户具有可读取远程服务器相应文件的权限，否则scp命令是无法起作用的。</p><p><a href="commands.html"><img class="navup" src="images/up.gif" alt="Linux 命令大全"> Linux 常用命令</a></p>	
			
			</div>
		</div>
	</body>
</html>